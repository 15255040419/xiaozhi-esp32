CONFIG_COMPILER_CXX_EXCEPTIONS=y
CONFIG_COMPILER_CXX_EXCEPTIONS_EMG_POOL_SIZE=1024

CONFIG_BOOTLOADER_COMPILER_OPTIMIZATION_PERF=y
CONFIG_BOOTLOADER_LOG_LEVEL_NONE=y
CONFIG_BOOTLOADER_SKIP_VALIDATE_ALWAYS=y
CONFIG_BOOTLOADER_APP_ROLLBACK_ENABLE=y

CONFIG_HTTPD_MAX_REQ_HDR_LEN=2048
CONFIG_HTTPD_MAX_URI_LEN=2048

CONFIG_PARTITION_TABLE_CUSTOM=y
CONFIG_PARTITION_TABLE_CUSTOM_FILENAME="partitions.csv"
CONFIG_PARTITION_TABLE_OFFSET=0x8000

ESP_TASK_WDT_TIMEOUT_S=30
CONFIG_FREERTOS_GENERATE_RUN_TIME_STATS=y
CONFIG_FREERTOS_USE_STATS_FORMATTING_FUNCTIONS=y

CONFIG_LV_COLOR_16_SWAP=y
CONFIG_LV_MEM_CUSTOM=y
CONFIG_LV_USE_GIF=y
CONFIG_LV_USE_DRAW_BUF_SIMPLE=y
CONFIG_LV_DRAW_BUF_ALIGN=1

CONFIG_MBEDTLS_DYNAMIC_BUFFER=y
CONFIG_ESP_WIFI_IRAM_OPT=n
CONFIG_ESP_WIFI_RX_IRAM_OPT=n

# I2C 驱动配置
CONFIG_DRIVER_I2C_LEGACY=n
CONFIG_DRIVER_I2C_NEW=y
CONFIG_ESP_CODEC_DEV_USE_NEW_DRIVER=y
CONFIG_CODEC_I2C_BACKWARD_COMPATIBLE=n

# USB 配置
CONFIG_TINYUSB_ENABLED=y
CONFIG_TINYUSB_MSC_ENABLED=y
CONFIG_TINYUSB_DESC_USE_ESPRESSIF_VID=y
CONFIG_TINYUSB_DESC_USE_DEFAULT_PID=y
CONFIG_TINYUSB_MSC_BUFSIZE=4096
CONFIG_TINYUSB_CDC_ENABLED=n
CONFIG_TINYUSB_HID_ENABLED=n

# USB 引脚配置
CONFIG_TINYUSB_USB_DEV_NUM=1
CONFIG_TINYUSB_DESC_CUSTOM_VID=0x303A
CONFIG_TINYUSB_DESC_CUSTOM_PID=0x4002

# USB CDC 配置
CONFIG_TINYUSB_CDC_RX_BUFSIZE=512
CONFIG_TINYUSB_CDC_TX_BUFSIZE=512

# USB MSC 配置
CONFIG_TINYUSB_MSC_EP_BUFSIZE=512
CONFIG_TINYUSB_MSC_VENDOR_ID="ESP32S3"
CONFIG_TINYUSB_MSC_PRODUCT_ID="Mass Storage"
CONFIG_TINYUSB_MSC_PRODUCT_REV="1.0"

# SDMMC配置
CONFIG_SDMMC_HOST_ENABLE=y
CONFIG_SDMMC_ENABLE_DRIVER_FAULT_TOLERANCE=y
CONFIG_SDMMC_COMMAND_TIMEOUT_MS=1000
CONFIG_SDMMC_HOST_SLOT_1=y
CONFIG_SDMMC_FREQ_DEFAULT=20000
CONFIG_SDMMC_USE_GPIO_MATRIX=y

# 板型配置
CONFIG_BOARD_TYPE_NOMI=y

# PSRAM配置
CONFIG_ESP32S3_SPIRAM_SUPPORT=y
CONFIG_SPIRAM_MODE_OCT=y
CONFIG_SPIRAM_SPEED_80M=y
CONFIG_SPIRAM=y
CONFIG_SPIRAM_BOOT_INIT=y
CONFIG_SPIRAM_USE_MALLOC=y
CONFIG_SPIRAM_TYPE_AUTO=y
CONFIG_SPIRAM_SIZE=-1
CONFIG_SPIRAM_SPEED_80M=y
CONFIG_SPIRAM_MALLOC_ALWAYSINTERNAL=32768
CONFIG_SPIRAM_TRY_ALLOCATE_WIFI_LWIP=y
CONFIG_SPIRAM_MALLOC_RESERVE_INTERNAL=65536

# LVGL 缓存配置
CONFIG_LV_MEM_SIZE=65536
CONFIG_LV_IMG_CACHE_DEF_SIZE=10
CONFIG_LV_USE_DRAW_BUF_SIMPLE=y
CONFIG_LV_DRAW_BUF_ALIGN=1
CONFIG_LV_GIF_CACHE_DECODING_DATA=y

# LVGL GIF 配置
CONFIG_LV_GIF_USE_CUSTOM_DECODER=y
CONFIG_LV_GIF_CACHE_DECODING_DATA=y
CONFIG_LV_GIF_DECODER_BUFFER_SIZE=4096
CONFIG_LV_USE_DRAW_BUF_SIMPLE=y
CONFIG_LV_DRAW_BUF_ALIGN=1

# LVGL 任务配置
CONFIG_LVGL_TASK_PRIORITY=2
CONFIG_LVGL_TASK_STACK_SIZE=4096
CONFIG_LVGL_TASK_CORE_AFFINITY=0
